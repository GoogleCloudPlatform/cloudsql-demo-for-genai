<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <style>
        .chat-container {
            /* Some basic styling - adjust as needed */
        }

        .chat-output {
            /* Style for the response display area */
        }
    </style>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const messageInput = document.getElementById('messageInput');
            const sendButton = document.getElementById('sendButton');
            const chatOutput = document.querySelector('.chat-output');

            sendButton.addEventListener('click', () => {
                const message = messageInput.value;
                messageInput.value = ''; // Clear input
                sendMessage(message);
                displayMessage(message);
            });

            function sendMessage(message) {
                const query = new URLSearchParams({q: message}).toString();
                const url = "/chatbot?" + query;
                fetch(url)
                    .then(resp => resp.json())
                    .then(data => displayMessage(data.answer));
            }

            function displayMessage(message) {
                // Insert message into chat history
                const el = document.createElement("li");
                el.innerHTML = message;
                chatOutput.appendChild(el);
            }
        });

    </script>

</head>

<body>
    <div class="mdl-layout mdl-js-layout">
        <main class="mdl-layout__content">
            <div class="chat-container">
                <ul class="chat-output"></ul>
                <div class="chat-input">
                    <input type="text" id="messageInput" class="mdl-textfield__input">
                    <button id="sendButton" class="mdl-button mdl-js-button mdl-button--raised">
                        Send
                    </button>
                </div>
            </div>
        </main>
    </div>
</body>

</html>
